<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Data Completeness | Audit Analytics with R</title>
  <meta name="description" content="A toolkit for Internal Audit and Financial auditors" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Data Completeness | Audit Analytics with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A toolkit for Internal Audit and Financial auditors" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Data Completeness | Audit Analytics with R" />
  
  <meta name="twitter:description" content="A toolkit for Internal Audit and Financial auditors" />
  

<meta name="author" content="Jonathan Lin" />


<meta name="date" content="2020-11-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="import-data.html"/>
<link rel="next" href="cleaning-data.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>
<script src="libs/d3-3.3.8/d3.min.js"></script>
<script src="libs/dagre-0.4.0/dagre-d3.min.js"></script>
<link href="libs/mermaid-0.3.0/dist/mermaid.css" rel="stylesheet" />
<script src="libs/mermaid-0.3.0/dist/mermaid.slim.min.js"></script>
<script src="libs/chromatography-0.1/chromatography.js"></script>
<script src="libs/DiagrammeR-binding-1.0.6.1/DiagrammeR.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.14/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Audit Analytics in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the author</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="part"><span><b>I Structure</b></span></li>
<li class="chapter" data-level="2" data-path="approach.html"><a href="approach.html"><i class="fa fa-check"></i><b>2</b> Approach</a><ul>
<li class="chapter" data-level="2.1" data-path="approach.html"><a href="approach.html#code-based-development"><i class="fa fa-check"></i><b>2.1</b> Code-based development</a></li>
<li class="chapter" data-level="2.2" data-path="approach.html"><a href="approach.html#automate-relentlessly"><i class="fa fa-check"></i><b>2.2</b> Automate relentlessly</a></li>
<li class="chapter" data-level="2.3" data-path="approach.html"><a href="approach.html#share-everything"><i class="fa fa-check"></i><b>2.3</b> Share everything</a></li>
<li class="chapter" data-level="2.4" data-path="approach.html"><a href="approach.html#always-deliver-useful-product"><i class="fa fa-check"></i><b>2.4</b> Always deliver useful product</a></li>
<li class="chapter" data-level="2.5" data-path="approach.html"><a href="approach.html#dont-be-a-hero"><i class="fa fa-check"></i><b>2.5</b> Don’t be a hero</a></li>
<li class="chapter" data-level="2.6" data-path="approach.html"><a href="approach.html#the-opportunity-cost"><i class="fa fa-check"></i><b>2.6</b> “The opportunity cost”</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="architecture.html"><a href="architecture.html"><i class="fa fa-check"></i><b>3</b> Architecture</a><ul>
<li class="chapter" data-level="3.1" data-path="architecture.html"><a href="architecture.html#architecture-r"><i class="fa fa-check"></i><b>3.1</b> R and RStudio</a></li>
<li class="chapter" data-level="3.2" data-path="architecture.html"><a href="architecture.html#code-repositories"><i class="fa fa-check"></i><b>3.2</b> Code repositories</a><ul>
<li class="chapter" data-level="3.2.1" data-path="architecture.html"><a href="architecture.html#git"><i class="fa fa-check"></i><b>3.2.1</b> git</a></li>
<li class="chapter" data-level="3.2.2" data-path="architecture.html"><a href="architecture.html#packages"><i class="fa fa-check"></i><b>3.2.2</b> Packages</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="architecture.html"><a href="architecture.html#data-products"><i class="fa fa-check"></i><b>3.3</b> Data products</a><ul>
<li class="chapter" data-level="3.3.1" data-path="architecture.html"><a href="architecture.html#galvanize-highbond"><i class="fa fa-check"></i><b>3.3.1</b> Galvanize Highbond</a></li>
<li class="chapter" data-level="3.3.2" data-path="architecture.html"><a href="architecture.html#rstudio-connect"><i class="fa fa-check"></i><b>3.3.2</b> RStudio Connect</a></li>
<li class="chapter" data-level="3.3.3" data-path="architecture.html"><a href="architecture.html#rstudio-package-manager"><i class="fa fa-check"></i><b>3.3.3</b> RStudio Package Manager</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="architecture.html"><a href="architecture.html#data-sources"><i class="fa fa-check"></i><b>3.4</b> Data sources</a><ul>
<li class="chapter" data-level="3.4.1" data-path="architecture.html"><a href="architecture.html#internal-databases"><i class="fa fa-check"></i><b>3.4.1</b> Internal databases</a></li>
<li class="chapter" data-level="3.4.2" data-path="architecture.html"><a href="architecture.html#external-sources"><i class="fa fa-check"></i><b>3.4.2</b> External sources</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="architecture.html"><a href="architecture.html#audit-data-mart"><i class="fa fa-check"></i><b>3.5</b> Audit data mart</a></li>
</ul></li>
<li class="part"><span><b>II Technical</b></span></li>
<li class="chapter" data-level="4" data-path="setup.html"><a href="setup.html"><i class="fa fa-check"></i><b>4</b> Setup</a><ul>
<li class="chapter" data-level="4.1" data-path="setup.html"><a href="setup.html#setup-r"><i class="fa fa-check"></i><b>4.1</b> R with RStudio</a></li>
<li class="chapter" data-level="4.2" data-path="setup.html"><a href="setup.html#common-packages"><i class="fa fa-check"></i><b>4.2</b> Common packages</a></li>
<li class="chapter" data-level="4.3" data-path="setup.html"><a href="setup.html#highbond-r-package."><i class="fa fa-check"></i><b>4.3</b> Highbond R package.</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="import-data.html"><a href="import-data.html"><i class="fa fa-check"></i><b>5</b> Import data</a><ul>
<li class="chapter" data-level="5.1" data-path="import-data.html"><a href="import-data.html#delimited-files"><i class="fa fa-check"></i><b>5.1</b> Delimited files</a><ul>
<li class="chapter" data-level="5.1.1" data-path="import-data.html"><a href="import-data.html#handling-problematic-delimited-files"><i class="fa fa-check"></i><b>5.1.1</b> Handling problematic delimited files</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="import-data.html"><a href="import-data.html#import-db"><i class="fa fa-check"></i><b>5.2</b> Databases</a></li>
<li class="chapter" data-level="5.3" data-path="import-data.html"><a href="import-data.html#apis"><i class="fa fa-check"></i><b>5.3</b> APIs</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-completeness.html"><a href="data-completeness.html"><i class="fa fa-check"></i><b>6</b> Data Completeness</a><ul>
<li class="chapter" data-level="6.1" data-path="data-completeness.html"><a href="data-completeness.html#exploration-of-general-ledger-data"><i class="fa fa-check"></i><b>6.1</b> Exploration of General Ledger data</a></li>
<li class="chapter" data-level="6.2" data-path="data-completeness.html"><a href="data-completeness.html#examination-of-potential-errors"><i class="fa fa-check"></i><b>6.2</b> Examination of potential errors</a><ul>
<li class="chapter" data-level="6.2.1" data-path="data-completeness.html"><a href="data-completeness.html#completeness-na"><i class="fa fa-check"></i><b>6.2.1</b> NA values</a></li>
<li class="chapter" data-level="6.2.2" data-path="data-completeness.html"><a href="data-completeness.html#journal-entries-balance-to-zero"><i class="fa fa-check"></i><b>6.2.2</b> Journal Entries balance to zero</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="data-completeness.html"><a href="data-completeness.html#transforming-of-trial-balance-data"><i class="fa fa-check"></i><b>6.3</b> Transforming of Trial Balance data</a><ul>
<li class="chapter" data-level="6.3.1" data-path="data-completeness.html"><a href="data-completeness.html#sum-by-absolute-references"><i class="fa fa-check"></i><b>6.3.1</b> Sum by absolute references</a></li>
<li class="chapter" data-level="6.3.2" data-path="data-completeness.html"><a href="data-completeness.html#sum-by-numeric-position"><i class="fa fa-check"></i><b>6.3.2</b> Sum by numeric position</a></li>
<li class="chapter" data-level="6.3.3" data-path="data-completeness.html"><a href="data-completeness.html#sum-by-named-references"><i class="fa fa-check"></i><b>6.3.3</b> Sum by named references</a></li>
<li class="chapter" data-level="6.3.4" data-path="data-completeness.html"><a href="data-completeness.html#pivot-then-summarize"><i class="fa fa-check"></i><b>6.3.4</b> Pivot then summarize</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="data-completeness.html"><a href="data-completeness.html#asserting-completeness"><i class="fa fa-check"></i><b>6.4</b> Asserting Completeness</a><ul>
<li class="chapter" data-level="6.4.1" data-path="data-completeness.html"><a href="data-completeness.html#completeness-join"><i class="fa fa-check"></i><b>6.4.1</b> Joining the GL to the TB</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="data-completeness.html"><a href="data-completeness.html#cautionary-notes-for-completeness"><i class="fa fa-check"></i><b>6.5</b> Cautionary notes for Completeness</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="cleaning-data.html"><a href="cleaning-data.html"><i class="fa fa-check"></i><b>7</b> Cleaning data</a><ul>
<li class="chapter" data-level="7.1" data-path="cleaning-data.html"><a href="cleaning-data.html#basic-math"><i class="fa fa-check"></i><b>7.1</b> Basic math</a></li>
<li class="chapter" data-level="7.2" data-path="cleaning-data.html"><a href="cleaning-data.html#dates-and-times"><i class="fa fa-check"></i><b>7.2</b> Dates and Times</a><ul>
<li class="chapter" data-level="7.2.1" data-path="cleaning-data.html"><a href="cleaning-data.html#understanding-default-time-zones"><i class="fa fa-check"></i><b>7.2.1</b> Understanding Default Time Zones</a></li>
<li class="chapter" data-level="7.2.2" data-path="cleaning-data.html"><a href="cleaning-data.html#override-or-display-timezones"><i class="fa fa-check"></i><b>7.2.2</b> Override or display timezones</a></li>
<li class="chapter" data-level="7.2.3" data-path="cleaning-data.html"><a href="cleaning-data.html#daylight-saving-implications"><i class="fa fa-check"></i><b>7.2.3</b> Daylight Saving Implications</a></li>
<li class="chapter" data-level="7.2.4" data-path="cleaning-data.html"><a href="cleaning-data.html#differences-between-time"><i class="fa fa-check"></i><b>7.2.4</b> Differences between time</a></li>
<li class="chapter" data-level="7.2.5" data-path="cleaning-data.html"><a href="cleaning-data.html#derived-date-information"><i class="fa fa-check"></i><b>7.2.5</b> Derived date information</a></li>
<li class="chapter" data-level="7.2.6" data-path="cleaning-data.html"><a href="cleaning-data.html#cleaning-numerical-dates"><i class="fa fa-check"></i><b>7.2.6</b> Cleaning numerical dates</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="cleaning-data.html"><a href="cleaning-data.html#separate"><i class="fa fa-check"></i><b>7.3</b> Separate</a></li>
<li class="chapter" data-level="7.4" data-path="cleaning-data.html"><a href="cleaning-data.html#separate_rows"><i class="fa fa-check"></i><b>7.4</b> Separate_rows</a></li>
<li class="chapter" data-level="7.5" data-path="cleaning-data.html"><a href="cleaning-data.html#tidy-data"><i class="fa fa-check"></i><b>7.5</b> Tidy data</a></li>
<li class="chapter" data-level="7.6" data-path="cleaning-data.html"><a href="cleaning-data.html#clean-pivot"><i class="fa fa-check"></i><b>7.6</b> Pivots, wide and longer</a></li>
<li class="chapter" data-level="7.7" data-path="cleaning-data.html"><a href="cleaning-data.html#joining-data"><i class="fa fa-check"></i><b>7.7</b> Joining data</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="exploring-data.html"><a href="exploring-data.html"><i class="fa fa-check"></i><b>8</b> Exploring data</a><ul>
<li class="chapter" data-level="8.1" data-path="exploring-data.html"><a href="exploring-data.html#explore-stats"><i class="fa fa-check"></i><b>8.1</b> Basic Statistics</a></li>
<li class="chapter" data-level="8.2" data-path="exploring-data.html"><a href="exploring-data.html#summarizations"><i class="fa fa-check"></i><b>8.2</b> Summarizations</a></li>
<li class="chapter" data-level="8.3" data-path="exploring-data.html"><a href="exploring-data.html#data-visualization---why"><i class="fa fa-check"></i><b>8.3</b> Data Visualization - Why</a></li>
<li class="chapter" data-level="8.4" data-path="exploring-data.html"><a href="exploring-data.html#data-visualization---how"><i class="fa fa-check"></i><b>8.4</b> Data Visualization - How</a><ul>
<li class="chapter" data-level="8.4.1" data-path="exploring-data.html"><a href="exploring-data.html#time-series"><i class="fa fa-check"></i><b>8.4.1</b> Time-series</a></li>
<li class="chapter" data-level="8.4.2" data-path="exploring-data.html"><a href="exploring-data.html#facets"><i class="fa fa-check"></i><b>8.4.2</b> Facets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="test.html"><a href="test.html"><i class="fa fa-check"></i><b>9</b> Test</a><ul>
<li class="chapter" data-level="9.1" data-path="test.html"><a href="test.html#amount-based-tests"><i class="fa fa-check"></i><b>9.1</b> Amount-based tests</a><ul>
<li class="chapter" data-level="9.1.1" data-path="test.html"><a href="test.html#above-te"><i class="fa fa-check"></i><b>9.1.1</b> Above threshold</a></li>
<li class="chapter" data-level="9.1.2" data-path="test.html"><a href="test.html#round-numbers"><i class="fa fa-check"></i><b>9.1.2</b> Round numbers</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="test.html"><a href="test.html#date-based-tests"><i class="fa fa-check"></i><b>9.2</b> Date-based tests</a><ul>
<li class="chapter" data-level="9.2.1" data-path="test.html"><a href="test.html#weekend-testing"><i class="fa fa-check"></i><b>9.2.1</b> Weekend testing</a></li>
<li class="chapter" data-level="9.2.2" data-path="test.html"><a href="test.html#cutoff-testing"><i class="fa fa-check"></i><b>9.2.2</b> Cutoff testing</a></li>
<li class="chapter" data-level="9.2.3" data-path="test.html"><a href="test.html#age"><i class="fa fa-check"></i><b>9.2.3</b> Age</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="test.html"><a href="test.html#basic-statistical-tests"><i class="fa fa-check"></i><b>9.3</b> Basic Statistical tests</a><ul>
<li class="chapter" data-level="9.3.1" data-path="test.html"><a href="test.html#outliers-based-on-amount"><i class="fa fa-check"></i><b>9.3.1</b> Outliers based on amount</a></li>
<li class="chapter" data-level="9.3.2" data-path="test.html"><a href="test.html#outliers-based-on-amounts-and-other-factors"><i class="fa fa-check"></i><b>9.3.2</b> Outliers based on amounts and other factors</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="test.html"><a href="test.html#unusual-pattern-and-behaviours"><i class="fa fa-check"></i><b>9.4</b> Unusual pattern and behaviours</a><ul>
<li class="chapter" data-level="9.4.1" data-path="test.html"><a href="test.html#benfords-law-analysis"><i class="fa fa-check"></i><b>9.4.1</b> Benford’s Law analysis</a></li>
<li class="chapter" data-level="9.4.2" data-path="test.html"><a href="test.html#relative-size-factor-rsf"><i class="fa fa-check"></i><b>9.4.2</b> Relative size factor (RSF)</a></li>
<li class="chapter" data-level="9.4.3" data-path="test.html"><a href="test.html#duplicate-invoices"><i class="fa fa-check"></i><b>9.4.3</b> Duplicate Invoices</a></li>
<li class="chapter" data-level="9.4.4" data-path="test.html"><a href="test.html#detecting-gaps-in-sequences"><i class="fa fa-check"></i><b>9.4.4</b> Detecting gaps in sequences</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="test.html"><a href="test.html#test-searchtext"><i class="fa fa-check"></i><b>9.5</b> Search text</a><ul>
<li class="chapter" data-level="9.5.1" data-path="test.html"><a href="test.html#regex-basics"><i class="fa fa-check"></i><b>9.5.1</b> Regex basics</a></li>
<li class="chapter" data-level="9.5.2" data-path="test.html"><a href="test.html#starts-or-ends-with-anchors"><i class="fa fa-check"></i><b>9.5.2</b> Starts or Ends with (Anchors)</a></li>
<li class="chapter" data-level="9.5.3" data-path="test.html"><a href="test.html#crash-course-in-encoding"><i class="fa fa-check"></i><b>9.5.3</b> Crash course in Encoding</a></li>
<li class="chapter" data-level="9.5.4" data-path="test.html"><a href="test.html#cleaning-text"><i class="fa fa-check"></i><b>9.5.4</b> Cleaning Text</a></li>
<li class="chapter" data-level="9.5.5" data-path="test.html"><a href="test.html#searching-multiple-fields"><i class="fa fa-check"></i><b>9.5.5</b> Searching Multiple Fields</a></li>
<li class="chapter" data-level="9.5.6" data-path="test.html"><a href="test.html#regex-further"><i class="fa fa-check"></i><b>9.5.6</b> Further reading</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="report.html"><a href="report.html"><i class="fa fa-check"></i><b>10</b> Report</a><ul>
<li class="chapter" data-level="10.1" data-path="report.html"><a href="report.html#report-structure"><i class="fa fa-check"></i><b>10.1</b> Report Structure</a></li>
<li class="chapter" data-level="10.2" data-path="report.html"><a href="report.html#export-files"><i class="fa fa-check"></i><b>10.2</b> Export files</a></li>
</ul></li>
<li class="part"><span><b>III Advanced teams</b></span></li>
<li class="chapter" data-level="11" data-path="applied-audit-analytics.html"><a href="applied-audit-analytics.html"><i class="fa fa-check"></i><b>11</b> Applied Audit Analytics</a></li>
<li class="chapter" data-level="12" data-path="auditpackage.html"><a href="auditpackage.html"><i class="fa fa-check"></i><b>12</b> Audit R Package</a><ul>
<li class="chapter" data-level="12.1" data-path="auditpackage.html"><a href="auditpackage.html#package-functions"><i class="fa fa-check"></i><b>12.1</b> Package functions</a></li>
<li class="chapter" data-level="12.2" data-path="auditpackage.html"><a href="auditpackage.html#templates"><i class="fa fa-check"></i><b>12.2</b> Templates</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="continuous-monitoring.html"><a href="continuous-monitoring.html"><i class="fa fa-check"></i><b>13</b> Continuous monitoring</a><ul>
<li class="chapter" data-level="13.1" data-path="continuous-monitoring.html"><a href="continuous-monitoring.html#considerations"><i class="fa fa-check"></i><b>13.1</b> Considerations</a></li>
<li class="chapter" data-level="13.2" data-path="continuous-monitoring.html"><a href="continuous-monitoring.html#create-a-collection-analytic-and-table"><i class="fa fa-check"></i><b>13.2</b> Create a Collection, Analytic and Table</a></li>
<li class="chapter" data-level="13.3" data-path="continuous-monitoring.html"><a href="continuous-monitoring.html#define-the-high-risk-test"><i class="fa fa-check"></i><b>13.3</b> Define the High Risk test</a></li>
<li class="chapter" data-level="13.4" data-path="continuous-monitoring.html"><a href="continuous-monitoring.html#uploading-additional-results"><i class="fa fa-check"></i><b>13.4</b> Uploading additional results</a></li>
<li class="chapter" data-level="13.5" data-path="continuous-monitoring.html"><a href="continuous-monitoring.html#downloading-records-and-responses"><i class="fa fa-check"></i><b>13.5</b> Downloading records and responses</a></li>
<li class="chapter" data-level="13.6" data-path="continuous-monitoring.html"><a href="continuous-monitoring.html#triggers-and-questionnaires"><i class="fa fa-check"></i><b>13.6</b> Triggers and Questionnaires</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="applied-adw.html"><a href="applied-adw.html"><i class="fa fa-check"></i><b>14</b> Audit Data Mart</a></li>
<li class="chapter" data-level="15" data-path="other-practices-to-follow.html"><a href="other-practices-to-follow.html"><i class="fa fa-check"></i><b>15</b> Other practices to follow</a><ul>
<li class="chapter" data-level="15.1" data-path="other-practices-to-follow.html"><a href="other-practices-to-follow.html#documentation"><i class="fa fa-check"></i><b>15.1</b> Documentation</a></li>
<li class="chapter" data-level="15.2" data-path="other-practices-to-follow.html"><a href="other-practices-to-follow.html#passwords"><i class="fa fa-check"></i><b>15.2</b> Passwords</a></li>
</ul></li>
<li class="part"><span><b>IV Appendix</b></span></li>
<li class="chapter" data-level="16" data-path="appendixct.html"><a href="appendixct.html"><i class="fa fa-check"></i><b>16</b> Continuous Auditing methodology</a><ul>
<li class="chapter" data-level="16.1" data-path="appendixct.html"><a href="appendixct.html#support-for-continuous-auditing"><i class="fa fa-check"></i><b>16.1</b> Support for Continuous Auditing</a></li>
<li class="chapter" data-level="16.2" data-path="appendixct.html"><a href="appendixct.html#the-requirements-for-evaluting-icfr"><i class="fa fa-check"></i><b>16.2</b> The requirements for evaluting ICFR</a></li>
<li class="chapter" data-level="16.3" data-path="appendixct.html"><a href="appendixct.html#determining-population-tolerable-error-rate"><i class="fa fa-check"></i><b>16.3</b> Determining population tolerable error rate</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Audit Analytics with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-completeness" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Data Completeness</h1>
<p>The first thing you should do when you get a new piece of data, before you do any analysis, is to validate the data for obvious data errors and to perform completeness testing. The intent of Completeness testing is to evaluate whether you have received a full set of data - data anomalies can be explored further after the preliminary testing (for example, malformed dates, NA information, etc.).</p>
<p>Ideally, completeness on a data set should be performed by comparing to another data set - for example, a detailed ledger can roll up into account balances. Other ways of performing completeness is to compare data against a third party, independently managed source of information.</p>
<p>For this section we will use the accounting database and validate our Journal Entry file prior to doing further work. We covered the importing of data in the prior chapter, so we’ll do that again along with some packages:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="data-completeness.html#cb43-1"></a><span class="kw">library</span>(dplyr) <span class="co"># For manipulating data</span></span>
<span id="cb43-2"><a href="data-completeness.html#cb43-2"></a><span class="kw">library</span>(tidyr) <span class="co"># For making data long and wide</span></span>
<span id="cb43-3"><a href="data-completeness.html#cb43-3"></a></span>
<span id="cb43-4"><a href="data-completeness.html#cb43-4"></a><span class="kw">library</span>(DBI) <span class="co"># For database connections</span></span>
<span id="cb43-5"><a href="data-completeness.html#cb43-5"></a></span>
<span id="cb43-6"><a href="data-completeness.html#cb43-6"></a><span class="kw">dir.create</span>(<span class="st">&quot;data&quot;</span>, <span class="dt">showWarnings =</span> <span class="ot">FALSE</span>)</span>
<span id="cb43-7"><a href="data-completeness.html#cb43-7"></a></span>
<span id="cb43-8"><a href="data-completeness.html#cb43-8"></a><span class="kw">download.file</span>(<span class="dt">url =</span> <span class="st">&quot;https://github.com/jonlinca/auditanalytics/raw/master/data/rauditanalytics.sqlite&quot;</span>,</span>
<span id="cb43-9"><a href="data-completeness.html#cb43-9"></a>             <span class="dt">destfile =</span> <span class="st">&quot;data/rauditanalytics.sqlite&quot;</span>, <span class="dt">mode =</span> <span class="st">&quot;wb&quot;</span>)</span>
<span id="cb43-10"><a href="data-completeness.html#cb43-10"></a></span>
<span id="cb43-11"><a href="data-completeness.html#cb43-11"></a>con &lt;-<span class="st"> </span><span class="kw">dbConnect</span>(RSQLite<span class="op">::</span><span class="kw">SQLite</span>(), <span class="st">&quot;data/rauditanalytics.sqlite&quot;</span>)</span>
<span id="cb43-12"><a href="data-completeness.html#cb43-12"></a></span>
<span id="cb43-13"><a href="data-completeness.html#cb43-13"></a><span class="co"># Creates a table reference and collects the table, saving it as a gl object</span></span>
<span id="cb43-14"><a href="data-completeness.html#cb43-14"></a>gl &lt;-<span class="st"> </span><span class="kw">tbl</span>(con, <span class="st">&#39;gl&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb43-15"><a href="data-completeness.html#cb43-15"></a><span class="st">  </span><span class="kw">collect</span>()</span></code></pre></div>
<div id="exploration-of-general-ledger-data" class="section level2">
<h2><span class="header-section-number">6.1</span> Exploration of General Ledger data</h2>
<p>General Ledger (GL) data is where all the transactions against the accounting system are stored. Sub-ledgers may exist for specific systems (Accounts Payable, Accounts Receivable, Inventory) in a more detailed form, and these systems will also post to the General Ledger.</p>
<p>For the data set in our example, we’ve requested and received a full year’s worth of transactions.</p>
<p>A rapid preview of all your columns can be done quickly with <code>summary()</code>. Not only does it list all the fields available in the table, but it also gives quick statistics on numeric columns as well (whether it makes sense is up to you):</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="data-completeness.html#cb44-1"></a><span class="kw">summary</span>(gl)</span></code></pre></div>
<pre><code>##      je_num           amount          gl_date      gl_date_char      
##  Min.   :   1.0   Min.   :-96355   Min.   :17897   Length:2000       
##  1st Qu.: 250.8   1st Qu.: -6846   1st Qu.:17986   Class :character  
##  Median : 500.5   Median :     0   Median :18080   Mode  :character  
##  Mean   : 500.5   Mean   :     0   Mean   :18078                     
##  3rd Qu.: 750.2   3rd Qu.:  6846   3rd Qu.:18171                     
##  Max.   :1000.0   Max.   : 96355   Max.   :18261                     
##                                                                      
##    vendor_id      account           invoice_date   description       
##  Min.   :  77   Length:2000        Min.   :17887   Length:2000       
##  1st Qu.:2211   Class :character   1st Qu.:17976   Class :character  
##  Median :2612   Mode  :character   Median :18072   Mode  :character  
##  Mean   :2464                      Mean   :18069                     
##  3rd Qu.:2726                      3rd Qu.:18162                     
##  Max.   :2726                      Max.   :18254                     
##  NA&#39;s   :1000                      NA&#39;s   :44                        
##    paid_date    
##  Min.   :17900  
##  1st Qu.:18003  
##  Median :18097  
##  Mean   :18096  
##  3rd Qu.:18188  
##  Max.   :18291  
##  NA&#39;s   :44</code></pre>
<p>A high level summary scan is useful for us:</p>
<ul>
<li><code>je_num</code> is a number value, although it has no meaning as a number, as it is a reference.</li>
<li><code>vendor_id</code> is a number as well, but it contains NA’s. NA’s are R’s way of indicating that data does not exist.</li>
<li><code>amount</code> is both positive and negative - indicating this column has indicators of both credits and debits</li>
<li>The dates (<code>gl_date</code>, <code>invoice_date</code> and <code>paid_date</code>) are numeric while <code>gl_date_char</code> is a character. We will talk about converting these dates to something interpretable in the next chapter.</li>
</ul>
<p>It may be useful to look at a few data samples more closely to understand patterns. <code>head()</code> is useful in seeing the first few columns</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="data-completeness.html#cb46-1"></a><span class="kw">head</span>(gl)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 9
##   je_num  amount gl_date gl_date_char vendor_id account invoice_date description
##    &lt;int&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;            &lt;int&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;      
## 1      1  22667.   18232 2019-12-02        2211 exp_ma…        18225 Packaging …
## 2      1 -22667.   18232 2019-12-02          NA liab_a…        18225 Packaging …
## 3      2   1397.   18228 2019-11-28        2612 exp_ma…        18218 Paper      
## 4      2  -1397.   18228 2019-11-28          NA liab_a…        18218 Paper      
## 5      3   2319.   17995 2019-04-09        2612 exp_ma…        17985 Paper      
## 6      3  -2319.   17995 2019-04-09          NA liab_a…        17985 Paper      
## # … with 1 more variable: paid_date &lt;dbl&gt;</code></pre>
<p>We get a more detailed understanding of the fields:</p>
<ul>
<li><code>je_num</code> indicates a set of lines within a journal entry.</li>
<li><code>vendor_id</code> is usually associated to an expense account.</li>
<li><code>amount</code> is both positive and negative for the same journal entry - this means theoretically, it should balance to zero.</li>
<li>The dates, <code>gl_date</code> specifically, are numeric while <code>gl_date_char</code> appears as a date (but is still a character).</li>
</ul>
</div>
<div id="examination-of-potential-errors" class="section level2">
<h2><span class="header-section-number">6.2</span> Examination of potential errors</h2>
<div id="completeness-na" class="section level3">
<h3><span class="header-section-number">6.2.1</span> NA values</h3>
<p>At this stage, you could explore obvious potential issues - in this case, NA values have surfaced themselves early through the <code>summary()</code> command, so we should explore it a bit.</p>
<p>NAs are “Not available” or Missing Values. As an auditor, its important for to understand why NA values exist in your data set. Reasons I have heard in my career include:</p>
<ul>
<li><p>Data was not recorded - A field may be blank because it was intentionally or accidentally omitted. A “void date” is quite commonly NA in a GL database as most entries have not been voided. Or perhaps a journal entry is NA because it has not yet been approved. There may be business rules that indicate why a row’s value may be NA.</p></li>
<li><p>Data was not recorded at the time - A data source is always evolving, and new columns may be introduced as new features are rolled out or data structure changes. For example, a relatively new requirement indicating companies must identify government companies within their databases, and only applicable for new companies in the database. Vendors entered prior to this change may be left as NA.</p></li>
<li><p>Inappropriate coercion - the column type was converted from one to another and a loss of value occured. For example, converting the letter ‘a’ using <code>as.numeric()</code> will give the following:</p></li>
</ul>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="data-completeness.html#cb48-1"></a><span class="kw">as.numeric</span>(<span class="st">&#39;a&#39;</span>)</span></code></pre></div>
<pre><code>## Warning: NAs introduced by coercion</code></pre>
<pre><code>## [1] NA</code></pre>
<p>Its not that this value never existed. The letter ‘a’ did exist in the original format, but it doesn’t have a numerical representation within R. As it did not have a valid value when converted to a numeric type, it shows as NA.</p>
<p>In our data set, the <code>vendor_id</code> has NA values. We can inspect these by isolating them to determine the nature of the pattern:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="data-completeness.html#cb51-1"></a><span class="co"># Base R equivalent: </span></span>
<span id="cb51-2"><a href="data-completeness.html#cb51-2"></a><span class="co">#  gl[is.na(gl$vendor_id), ]</span></span>
<span id="cb51-3"><a href="data-completeness.html#cb51-3"></a></span>
<span id="cb51-4"><a href="data-completeness.html#cb51-4"></a><span class="co"># Tidyverse / dplyr</span></span>
<span id="cb51-5"><a href="data-completeness.html#cb51-5"></a>gl <span class="op">%&gt;%</span></span>
<span id="cb51-6"><a href="data-completeness.html#cb51-6"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.na</span>(vendor_id))</span></code></pre></div>
<pre><code>## # A tibble: 1,000 x 9
##    je_num  amount gl_date gl_date_char vendor_id account invoice_date
##     &lt;int&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;            &lt;int&gt; &lt;chr&gt;          &lt;dbl&gt;
##  1      1 -22667.   18232 2019-12-02          NA liab_a…        18225
##  2      2  -1397.   18228 2019-11-28          NA liab_a…        18218
##  3      3  -2319.   17995 2019-04-09          NA liab_a…        17985
##  4      4 -20037.   18199 2019-10-30          NA liab_a…        18189
##  5      5 -43140.   18051 2019-06-04          NA liab_a…        18041
##  6      6 -13603.   17927 2019-01-31          NA liab_a…        17920
##  7      7  -7001.   18190 2019-10-21          NA liab_a…        18183
##  8      8 -24753.   18010 2019-04-24          NA liab_a…        18003
##  9      9  -2295.   18087 2019-07-10          NA liab_a…        18080
## 10     10 -34263.   18060 2019-06-13          NA liab_a…        18053
## # … with 990 more rows, and 2 more variables: description &lt;chr&gt;,
## #   paid_date &lt;dbl&gt;</code></pre>
<p>This indicates that several values are NA. This enables us to ask the proper questions - specifically, we should seek to understand and corroborate with the business if there is a certain pattern associated to these NAs. dplyr’s <code>group_by()</code> and <code>summarize()</code> are useful for identifying these patterns further:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="data-completeness.html#cb53-1"></a>gl <span class="op">%&gt;%</span></span>
<span id="cb53-2"><a href="data-completeness.html#cb53-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.na</span>(vendor_id)) <span class="op">%&gt;%</span></span>
<span id="cb53-3"><a href="data-completeness.html#cb53-3"></a><span class="st">  </span><span class="kw">group_by</span>(account) <span class="op">%&gt;%</span></span>
<span id="cb53-4"><a href="data-completeness.html#cb53-4"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">n =</span> <span class="kw">n</span>(),</span>
<span id="cb53-5"><a href="data-completeness.html#cb53-5"></a>           <span class="dt">.groups =</span> <span class="st">&#39;drop&#39;</span>) <span class="co"># Needed to suppress the ungrouping object message</span></span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   account                         n
##   &lt;chr&gt;                       &lt;int&gt;
## 1 liab_accountspayable_2000     990
## 2 liab_creditcardpayable_2100    10</code></pre>
</div>
<div id="journal-entries-balance-to-zero" class="section level3">
<h3><span class="header-section-number">6.2.2</span> Journal Entries balance to zero</h3>
<p>A quick sanity check for the analysis of GL accounts is to do a quick summarization.</p>
<p>In this case, you will want to <code>group_by()</code> and <code>summarize()</code> again - in this case, by the <code>je_num</code> will test whether all journal entries will net to zero.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="data-completeness.html#cb55-1"></a>gl <span class="op">%&gt;%</span></span>
<span id="cb55-2"><a href="data-completeness.html#cb55-2"></a><span class="st">  </span><span class="kw">group_by</span>(je_num) <span class="op">%&gt;%</span></span>
<span id="cb55-3"><a href="data-completeness.html#cb55-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">amount =</span> <span class="kw">sum</span>(amount),</span>
<span id="cb55-4"><a href="data-completeness.html#cb55-4"></a>             <span class="dt">.groups =</span> <span class="st">&#39;drop&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb55-5"><a href="data-completeness.html#cb55-5"></a><span class="st">  </span><span class="kw">filter</span>(amount <span class="op">!=</span><span class="st"> </span><span class="dv">0</span>)</span></code></pre></div>
<pre><code>## # A tibble: 0 x 2
## # … with 2 variables: je_num &lt;int&gt;, amount &lt;dbl&gt;</code></pre>
</div>
</div>
<div id="transforming-of-trial-balance-data" class="section level2">
<h2><span class="header-section-number">6.3</span> Transforming of Trial Balance data</h2>
<p>The Trial Balance (TB) is intended to track and record higher level movements of the General Ledger. It does so by maintaining an accurate balance of debits and credits made to the accounts.</p>
<p>Lets look at our TB:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="data-completeness.html#cb57-1"></a>tb &lt;-<span class="st"> </span><span class="kw">tbl</span>(con, <span class="st">&#39;tb&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb57-2"><a href="data-completeness.html#cb57-2"></a><span class="st">  </span><span class="kw">collect</span>()</span>
<span id="cb57-3"><a href="data-completeness.html#cb57-3"></a></span>
<span id="cb57-4"><a href="data-completeness.html#cb57-4"></a><span class="kw">head</span>(tb)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 13
##   account activity_2019_01 activity_2019_02 activity_2019_03 activity_2019_04
##   &lt;chr&gt;              &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;
## 1 exp_co…         28785.              9942.            9715.            9931.
## 2 exp_ma…       1021508.            834766.          746621.          636011.
## 3 exp_me…             1.55               0                0              281.
## 4 liab_a…      -1050295.           -844708.         -756336.         -646057.
## 5 liab_c…             0                  0                0             -166.
## # … with 8 more variables: activity_2019_05 &lt;dbl&gt;, activity_2019_06 &lt;dbl&gt;,
## #   activity_2019_07 &lt;dbl&gt;, activity_2019_08 &lt;dbl&gt;, activity_2019_09 &lt;dbl&gt;,
## #   activity_2019_10 &lt;dbl&gt;, activity_2019_11 &lt;dbl&gt;, activity_2019_12 &lt;dbl&gt;</code></pre>
<p>The TB provided has the net change or net activity level by month. In your day-to-day work, you may also receive a TB that has an Opening and Closing balance - to obtain the net change for the audit period, simply deduct the Close from the Open to calculate the Change for the year, zeroing out the ‘Open’ component for income statement accounts.</p>
<p>In our case, we would like to perform completeness testing by account for the entire year, which means we compare the total activity of the account in the TB to the GL. As each column is its own month, we can approach this in several ways - each of the below methods demonstrates how to solve the problem.</p>
<div id="sum-by-absolute-references" class="section level3">
<h3><span class="header-section-number">6.3.1</span> Sum by absolute references</h3>
<p>In traditional “Excel-esque” form, you would add up each column for each row - simply taking the values of each column and adding them together.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="data-completeness.html#cb59-1"></a>tb <span class="op">%&gt;%</span></span>
<span id="cb59-2"><a href="data-completeness.html#cb59-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">tb_activity =</span> activity_<span class="dv">2019</span>_<span class="dv">01</span> <span class="op">+</span><span class="st"> </span>activity_<span class="dv">2019</span>_<span class="dv">02</span> <span class="op">+</span><span class="st"> </span>activity_<span class="dv">2019</span>_<span class="dv">03</span> <span class="op">+</span><span class="st"> </span>activity_<span class="dv">2019</span>_<span class="dv">04</span> <span class="op">+</span><span class="st"> </span>activity_<span class="dv">2019</span>_<span class="dv">05</span> <span class="op">+</span><span class="st"> </span>activity_<span class="dv">2019</span>_<span class="dv">06</span> <span class="op">+</span><span class="st"> </span>activity_<span class="dv">2019</span>_<span class="dv">07</span> <span class="op">+</span><span class="st"> </span>activity_<span class="dv">2019</span>_<span class="dv">08</span> <span class="op">+</span><span class="st"> </span>activity_<span class="dv">2019</span>_<span class="dv">09</span> <span class="op">+</span><span class="st"> </span>activity_<span class="dv">2019</span>_<span class="dv">10</span> <span class="op">+</span><span class="st"> </span>activity_<span class="dv">2019</span>_<span class="dv">11</span> <span class="op">+</span><span class="st"> </span>activity_<span class="dv">2019</span>_<span class="dv">12</span>) <span class="op">%&gt;%</span></span>
<span id="cb59-3"><a href="data-completeness.html#cb59-3"></a><span class="st">  </span><span class="kw">select</span>(account, tb_activity)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   account                     tb_activity
##   &lt;chr&gt;                             &lt;dbl&gt;
## 1 exp_consulting_6500             248427.
## 2 exp_materials_6000             9984507.
## 3 exp_meals_7000                    1706.
## 4 liab_accountspayable_2000    -10227945.
## 5 liab_creditcardpayable_2100      -6695.</code></pre>
<p>While the above works, there are some risks to this code:</p>
<ul>
<li>the code is difficult to read, as it is a long string of column names,</li>
<li>is prone to errors as you have to type out each column, and</li>
<li>this approach could only be used once, this year, as when the next audit year rolls around, you would have to manually change the references.</li>
</ul>
</div>
<div id="sum-by-numeric-position" class="section level3">
<h3><span class="header-section-number">6.3.2</span> Sum by numeric position</h3>
<p>To make this code more reusable, we could make some changes. We notice that the activity columns are in the second column through the thirteenth position, so we can assume that the ‘position’ of the columns will never change - second column will always be January, and the thirteenth will be December.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="data-completeness.html#cb61-1"></a><span class="kw">names</span>(tb) <span class="co"># This tells us the position number of each column names</span></span></code></pre></div>
<pre><code>##  [1] &quot;account&quot;          &quot;activity_2019_01&quot; &quot;activity_2019_02&quot; &quot;activity_2019_03&quot;
##  [5] &quot;activity_2019_04&quot; &quot;activity_2019_05&quot; &quot;activity_2019_06&quot; &quot;activity_2019_07&quot;
##  [9] &quot;activity_2019_08&quot; &quot;activity_2019_09&quot; &quot;activity_2019_10&quot; &quot;activity_2019_11&quot;
## [13] &quot;activity_2019_12&quot;</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="data-completeness.html#cb63-1"></a><span class="kw">names</span>(tb)[<span class="dv">2</span>] <span class="co"># Returns January</span></span></code></pre></div>
<pre><code>## [1] &quot;activity_2019_01&quot;</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="data-completeness.html#cb65-1"></a><span class="kw">names</span>(tb)[<span class="dv">13</span>] <span class="co"># Returns December</span></span></code></pre></div>
<pre><code>## [1] &quot;activity_2019_12&quot;</code></pre>
<p>Therefore, we can reference a range of column numbers in our script:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="data-completeness.html#cb67-1"></a>tb <span class="op">%&gt;%</span></span>
<span id="cb67-2"><a href="data-completeness.html#cb67-2"></a><span class="st">  </span><span class="kw">select</span>(<span class="dv">2</span><span class="op">:</span><span class="dv">13</span>) <span class="co"># Selects just the numeric columns that we assume, by column number</span></span></code></pre></div>
<pre><code>## # A tibble: 5 x 12
##   activity_2019_01 activity_2019_02 activity_2019_03 activity_2019_04
##              &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;
## 1         28785.              9942.            9715.            9931.
## 2       1021508.            834766.          746621.          636011.
## 3             1.55               0                0              281.
## 4      -1050295.           -844708.         -756336.         -646057.
## 5             0                  0                0             -166.
## # … with 8 more variables: activity_2019_05 &lt;dbl&gt;, activity_2019_06 &lt;dbl&gt;,
## #   activity_2019_07 &lt;dbl&gt;, activity_2019_08 &lt;dbl&gt;, activity_2019_09 &lt;dbl&gt;,
## #   activity_2019_10 &lt;dbl&gt;, activity_2019_11 &lt;dbl&gt;, activity_2019_12 &lt;dbl&gt;</code></pre>
<p>And now we can summarize by row</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="data-completeness.html#cb69-1"></a>tb_activity &lt;-<span class="st"> </span>tb <span class="op">%&gt;%</span></span>
<span id="cb69-2"><a href="data-completeness.html#cb69-2"></a><span class="st">  </span><span class="kw">select</span>(<span class="dv">2</span><span class="op">:</span><span class="dv">13</span>) <span class="op">%&gt;%</span></span>
<span id="cb69-3"><a href="data-completeness.html#cb69-3"></a><span class="st">  </span><span class="kw">rowSums</span>() <span class="co"># And sums up the row</span></span>
<span id="cb69-4"><a href="data-completeness.html#cb69-4"></a></span>
<span id="cb69-5"><a href="data-completeness.html#cb69-5"></a><span class="kw">print</span>(tb_activity) <span class="co"># This is saved as a numeric vector</span></span></code></pre></div>
<pre><code>## [1]    248426.92   9984507.34      1705.97 -10227945.12     -6695.11</code></pre>
<p>The newly calculated row summarization will return the total activity as a numeric vector; each item in the vector represents which row it belonged to. As this is a vector of numbers, we can a vector of the same TB account names and join them together.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="data-completeness.html#cb71-1"></a><span class="kw">print</span>(tb<span class="op">$</span>account) <span class="co"># Vector of account names as a character</span></span></code></pre></div>
<pre><code>## [1] &quot;exp_consulting_6500&quot;         &quot;exp_materials_6000&quot;         
## [3] &quot;exp_meals_7000&quot;              &quot;liab_accountspayable_2000&quot;  
## [5] &quot;liab_creditcardpayable_2100&quot;</code></pre>
<p>With these two vectors, we can create a new data frame with the account name and TB activity we calculated.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="data-completeness.html#cb73-1"></a><span class="kw">data.frame</span>(<span class="dt">account =</span> tb<span class="op">$</span>account, <span class="dt">tb_activity =</span> tb_activity) <span class="co"># We create a new dataframe - one from the character vector in the original trial balance file, the other from the created tb_activity</span></span></code></pre></div>
<pre><code>##                       account  tb_activity
## 1         exp_consulting_6500    248426.92
## 2          exp_materials_6000   9984507.34
## 3              exp_meals_7000      1705.97
## 4   liab_accountspayable_2000 -10227945.12
## 5 liab_creditcardpayable_2100     -6695.11</code></pre>
</div>
<div id="sum-by-named-references" class="section level3">
<h3><span class="header-section-number">6.3.3</span> Sum by named references</h3>
<p>In addition of referencing by position number, we can also reference by column name. We want to sum up all columns that start with “activity_”. The selecting by position and selecting by variable name are similar, so we’ll also introduce the ‘dot’ in this select statement.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="data-completeness.html#cb75-1"></a>tb <span class="op">%&gt;%</span></span>
<span id="cb75-2"><a href="data-completeness.html#cb75-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">tb_activity =</span> <span class="kw">rowSums</span>(</span>
<span id="cb75-3"><a href="data-completeness.html#cb75-3"></a>    <span class="kw">select</span>(., <span class="kw">contains</span>(<span class="st">&#39;activity_&#39;</span>)) <span class="co"># Only keep the column names with the word &#39;activity_&#39;</span></span>
<span id="cb75-4"><a href="data-completeness.html#cb75-4"></a>    )) <span class="op">%&gt;%</span></span>
<span id="cb75-5"><a href="data-completeness.html#cb75-5"></a><span class="st">  </span><span class="kw">select</span>(account, tb_activity)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   account                     tb_activity
##   &lt;chr&gt;                             &lt;dbl&gt;
## 1 exp_consulting_6500             248427.
## 2 exp_materials_6000             9984507.
## 3 exp_meals_7000                    1706.
## 4 liab_accountspayable_2000    -10227945.
## 5 liab_creditcardpayable_2100      -6695.</code></pre>
<p>What occurs here is that the dot will take the preceding command (technically known as the ‘left hand side’ or LHS) and feed it directly into the function. So in this case, the command can be narrated as:</p>
<blockquote>
<p>Using the <em>TB table</em> (this becomes our LHS), create a column named “tb_activity”… <br> <br> Calculate “tb_activity” by identifying all column names containing the word “activity_” from the <em>TB table</em> (referenced by the dot). Using these columns, add them together with rowSums.</p>
</blockquote>
<p>By introducing and referencing our columns by names, we’ve introduced a more specific and robust way to aggregate our information by account.</p>
</div>
<div id="pivot-then-summarize" class="section level3">
<h3><span class="header-section-number">6.3.4</span> Pivot then summarize</h3>
<p>While the prior methods focused on summing up multiple columns, you could also approach this problem as if it was a wide data set that needed to become long. The ability to pivot data longer and wider is incredibly useful - not only for cleaning, but also for reshaping data into other formats for plotting and preparing for databases.</p>
<p>If we look at our original TB data again, we notice there is:</p>
<ul>
<li>one unique identifier (the account name),</li>
<li>multiple values for each month (example, <code>activity_2019_01</code> represents the period with a value January 2019),</li>
<li>and the dollar value itself for each month.</li>
</ul>
<p>When we deconstruct our data, it becomes much easier to delve into the <strong>tidyr</strong> package and the functions <code>pivot_longer()</code> and <code>pivot_wider()</code>. We will discuss the details of pivoting in <a href="cleaning-data.html#clean-pivot">cleaning data</a>.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="data-completeness.html#cb77-1"></a><span class="kw">head</span>(tb) <span class="op">%&gt;%</span></span>
<span id="cb77-2"><a href="data-completeness.html#cb77-2"></a><span class="st">  </span>DT<span class="op">::</span><span class="kw">datatable</span>(<span class="dt">options =</span> <span class="kw">list</span>(<span class="dt">scrollX =</span> <span class="ot">TRUE</span>)) <span class="co"># Notice how this data looks wide</span></span></code></pre></div>
<div id="htmlwidget-de07bb51590f3784d58a" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-de07bb51590f3784d58a">{"x":{"filter":"none","data":[["1","2","3","4","5"],["exp_consulting_6500","exp_materials_6000","exp_meals_7000","liab_accountspayable_2000","liab_creditcardpayable_2100"],[28784.92,1021508.16,1.55,-1050294.63,0],[9942.01,834765.63,0,-844707.64,0],[9714.97,746620.59,0,-756335.56,0],[9930.94,636011.34,280.88,-646056.78,-166.38],[28973.06,953908.9,198.68,-983080.64,0],[37676.9,951239.95,240.06,-987921.28,-1235.63],[19294.71,915070.71,84.71,-934450.13,0],[9103.6,862191.34,278.21,-869777.57,-1795.58],[28697.69,553827.74,55.99,-581434.44,-1146.98],[28752.91,736083.68,317.74,-764134.43,-1019.9],[28278.54,790839.39,248.15,-819366.08,0],[9276.67,982439.91,0,-990385.94,-1330.64]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>account<\/th>\n      <th>activity_2019_01<\/th>\n      <th>activity_2019_02<\/th>\n      <th>activity_2019_03<\/th>\n      <th>activity_2019_04<\/th>\n      <th>activity_2019_05<\/th>\n      <th>activity_2019_06<\/th>\n      <th>activity_2019_07<\/th>\n      <th>activity_2019_08<\/th>\n      <th>activity_2019_09<\/th>\n      <th>activity_2019_10<\/th>\n      <th>activity_2019_11<\/th>\n      <th>activity_2019_12<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7,8,9,10,11,12,13]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="data-completeness.html#cb78-1"></a>tb_long &lt;-<span class="st"> </span>tb <span class="op">%&gt;%</span></span>
<span id="cb78-2"><a href="data-completeness.html#cb78-2"></a><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> <span class="kw">starts_with</span>(<span class="st">&quot;activity_&quot;</span>), <span class="co"># We want to aggregate the values in these columns</span></span>
<span id="cb78-3"><a href="data-completeness.html#cb78-3"></a>               <span class="dt">names_to =</span> <span class="st">&quot;period&quot;</span>, <span class="co"># What we want to call this new column</span></span>
<span id="cb78-4"><a href="data-completeness.html#cb78-4"></a>               <span class="dt">values_to =</span> <span class="st">&quot;activity&quot;</span>) <span class="co"># And the values we want to take from it</span></span>
<span id="cb78-5"><a href="data-completeness.html#cb78-5"></a></span>
<span id="cb78-6"><a href="data-completeness.html#cb78-6"></a>tb_long</span></code></pre></div>
<pre><code>## # A tibble: 60 x 3
##    account             period           activity
##    &lt;chr&gt;               &lt;chr&gt;               &lt;dbl&gt;
##  1 exp_consulting_6500 activity_2019_01   28785.
##  2 exp_consulting_6500 activity_2019_02    9942.
##  3 exp_consulting_6500 activity_2019_03    9715.
##  4 exp_consulting_6500 activity_2019_04    9931.
##  5 exp_consulting_6500 activity_2019_05   28973.
##  6 exp_consulting_6500 activity_2019_06   37677.
##  7 exp_consulting_6500 activity_2019_07   19295.
##  8 exp_consulting_6500 activity_2019_08    9104.
##  9 exp_consulting_6500 activity_2019_09   28698.
## 10 exp_consulting_6500 activity_2019_10   28753.
## # … with 50 more rows</code></pre>
<p>This data is now represented longer - there is now one unique value (activity) for each account and month. From here, we can now <code>summarize()</code>:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="data-completeness.html#cb80-1"></a>tb_long <span class="op">%&gt;%</span></span>
<span id="cb80-2"><a href="data-completeness.html#cb80-2"></a><span class="st">  </span><span class="kw">group_by</span>(account) <span class="op">%&gt;%</span></span>
<span id="cb80-3"><a href="data-completeness.html#cb80-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">tb_activity =</span> <span class="kw">sum</span>(activity))</span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 5 x 2
##   account                     tb_activity
##   &lt;chr&gt;                             &lt;dbl&gt;
## 1 exp_consulting_6500             248427.
## 2 exp_materials_6000             9984507.
## 3 exp_meals_7000                    1706.
## 4 liab_accountspayable_2000    -10227945.
## 5 liab_creditcardpayable_2100      -6695.</code></pre>
<p>While any of these approaches will work to calculate the trial balance of activity, there are sustainability advantages where the columns are not verbatim and explicitly mentioned - what matters is how you believe your dataset can change over time, or how easily readable you can communicate your work to a new individual.</p>
</div>
</div>
<div id="asserting-completeness" class="section level2">
<h2><span class="header-section-number">6.4</span> Asserting Completeness</h2>
<p>The practical goal before we do any further testing is to ensure we’re not wasting time with a data set that is missing information. This completeness test will help validate that we received data for twelve months of GL activity. In Journal Entry testing, this means we will compare the summarized Trial Balance file against the General Ledger entries to obtain reasonableness that our data set we received is complete.</p>
<p>To compare both the GL and TB, we will want to aggregate the data in both datasets before joining them together. First, we will aggregate the GL:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="data-completeness.html#cb83-1"></a>gl_summarized &lt;-<span class="st"> </span>gl <span class="op">%&gt;%</span></span>
<span id="cb83-2"><a href="data-completeness.html#cb83-2"></a><span class="st">  </span><span class="kw">group_by</span>(account) <span class="op">%&gt;%</span></span>
<span id="cb83-3"><a href="data-completeness.html#cb83-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">gl_total =</span> <span class="kw">sum</span>(amount),</span>
<span id="cb83-4"><a href="data-completeness.html#cb83-4"></a>           <span class="dt">.groups =</span> <span class="st">&#39;drop&#39;</span>) <span class="co"># Needed to suppress the ungrouping object message</span></span>
<span id="cb83-5"><a href="data-completeness.html#cb83-5"></a></span>
<span id="cb83-6"><a href="data-completeness.html#cb83-6"></a>gl_summarized</span></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   account                       gl_total
##   &lt;chr&gt;                            &lt;dbl&gt;
## 1 exp_consulting_6500            248427.
## 2 exp_materials_6000            9984507.
## 3 exp_meals_7000                   1706.
## 4 liab_accountspayable_2000   -10227945.
## 5 liab_creditcardpayable_2100     -6695.</code></pre>
<p>And also aggregate the TB:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="data-completeness.html#cb85-1"></a>tb_summarized &lt;-<span class="st"> </span>tb <span class="op">%&gt;%</span></span>
<span id="cb85-2"><a href="data-completeness.html#cb85-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">tb_activity =</span> <span class="kw">rowSums</span>(</span>
<span id="cb85-3"><a href="data-completeness.html#cb85-3"></a>    <span class="kw">select</span>(., <span class="kw">contains</span>(<span class="st">&#39;activity_&#39;</span>))</span>
<span id="cb85-4"><a href="data-completeness.html#cb85-4"></a>    )) <span class="op">%&gt;%</span></span>
<span id="cb85-5"><a href="data-completeness.html#cb85-5"></a><span class="st">  </span><span class="kw">select</span>(account, tb_activity)</span>
<span id="cb85-6"><a href="data-completeness.html#cb85-6"></a></span>
<span id="cb85-7"><a href="data-completeness.html#cb85-7"></a>tb_summarized</span></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   account                     tb_activity
##   &lt;chr&gt;                             &lt;dbl&gt;
## 1 exp_consulting_6500             248427.
## 2 exp_materials_6000             9984507.
## 3 exp_meals_7000                    1706.
## 4 liab_accountspayable_2000    -10227945.
## 5 liab_creditcardpayable_2100      -6695.</code></pre>
<div id="completeness-join" class="section level3">
<h3><span class="header-section-number">6.4.1</span> Joining the GL to the TB</h3>
<p>To perform a proper test of completeness, we should join both tables together. <em>dplyr</em> and the <code>*_join()</code> family of functions can be used to join tables, and also used as diagnosis tools to help debug information as well.</p>
<p>Our GL and TB summarized datasets could be joined by the <code>account</code> column, prior to performing the calculation to identify differences:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="data-completeness.html#cb87-1"></a>gl_summarized <span class="op">%&gt;%</span></span>
<span id="cb87-2"><a href="data-completeness.html#cb87-2"></a><span class="st">  </span><span class="kw">full_join</span>(tb_summarized, <span class="dt">by =</span> <span class="st">&#39;account&#39;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 3
##   account                       gl_total tb_activity
##   &lt;chr&gt;                            &lt;dbl&gt;       &lt;dbl&gt;
## 1 exp_consulting_6500            248427.     248427.
## 2 exp_materials_6000            9984507.    9984507.
## 3 exp_meals_7000                   1706.       1706.
## 4 liab_accountspayable_2000   -10227945.  -10227945.
## 5 liab_creditcardpayable_2100     -6695.      -6695.</code></pre>
<p>Once you have joined the columns together, a simple difference calculation will let you know what the differences are (if any):</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="data-completeness.html#cb89-1"></a>gl_summarized <span class="op">%&gt;%</span></span>
<span id="cb89-2"><a href="data-completeness.html#cb89-2"></a><span class="st">  </span><span class="kw">full_join</span>(tb_summarized, <span class="dt">by =</span> <span class="st">&#39;account&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb89-3"><a href="data-completeness.html#cb89-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">tb_diff =</span> gl_total <span class="op">-</span><span class="st"> </span>tb_activity)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 4
##   account                       gl_total tb_activity tb_diff
##   &lt;chr&gt;                            &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt;
## 1 exp_consulting_6500            248427.     248427.       0
## 2 exp_materials_6000            9984507.    9984507.       0
## 3 exp_meals_7000                   1706.       1706.       0
## 4 liab_accountspayable_2000   -10227945.  -10227945.       0
## 5 liab_creditcardpayable_2100     -6695.      -6695.       0</code></pre>
<p>And if you like clean working papers, simply filter to identify where the reconciliation did not work out:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="data-completeness.html#cb91-1"></a>gl_summarized <span class="op">%&gt;%</span></span>
<span id="cb91-2"><a href="data-completeness.html#cb91-2"></a><span class="st">  </span><span class="kw">full_join</span>(tb_summarized, <span class="dt">by =</span> <span class="st">&#39;account&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb91-3"><a href="data-completeness.html#cb91-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">tb_diff =</span> gl_total <span class="op">-</span><span class="st"> </span>tb_activity) <span class="op">%&gt;%</span></span>
<span id="cb91-4"><a href="data-completeness.html#cb91-4"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">filter</span>(tb_diff <span class="op">!=</span><span class="st"> </span><span class="dv">0</span>)</span></code></pre></div>
<pre><code>## # A tibble: 0 x 4
## # … with 4 variables: account &lt;chr&gt;, gl_total &lt;dbl&gt;, tb_activity &lt;dbl&gt;,
## #   tb_diff &lt;dbl&gt;</code></pre>
</div>
</div>
<div id="cautionary-notes-for-completeness" class="section level2">
<h2><span class="header-section-number">6.5</span> Cautionary notes for Completeness</h2>
<p>While performing completeness, you are proving you have a complete set of data. Exercise caution and ensure you are aware of the following:</p>
<ul>
<li><p>A completeness check is only as good as the data provided. In the above case, if November was completely excluded in both GL and TB, you would not be able to detect it at this stage if you did not look through the TB data to see that all twelve months were included.</p></li>
<li><p>Using <code>*_join()</code> functions will generally return all combinations of matches. This is a strong motivation to ensure you have summarized rows by the join columns, prior to joining. Once you have summarized your data, the <code>*_join()</code> functions are far more predictable.</p></li>
<li><p><code>full_join()</code> will indicate if there are any accounts missing from either table. In our example, if the <code>tb_summarized</code> data had missing accounts that did exist in the <code>gl_summarized</code> table, the resulting <code>tb_activity</code> column values would show up as NA.</p></li>
<li><p><code>anti_join()</code> will show what columns are included on the left, but missing on the right. In our example, if the <code>tb_summarized</code> data had missing accounts that existed in the <code>gl_summarized</code> table, only this account would show up in the results.</p></li>
</ul>
<p>You may want to consider testing for invalid values or missing dates up front. While the primary goal is to ensure the datasets received are appropriate, you may want to consider validating this information earlier. The next chapter will show you how to further manipulate and test these columns.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="import-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="cleaning-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Audit_Analytics_with-R.pdf", "Audit_Analytics_with-R.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
